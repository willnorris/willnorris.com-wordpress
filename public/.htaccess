Options +Multiviews

<IfModule mod_expires.c>
  ExpiresActive On

  ExpiresByType text/css "access plus 32 days"

  ExpiresByType text/javascript "access plus 32 days"
  ExpiresByType application/javascript "access plus 32 days"
  ExpiresByType application/x-javascript "access plus 32 days"

  ExpiresByType image/png "access plus 32 days"
  ExpiresByType image/gif "access plus 32 days"
  ExpiresByType image/jpg "access plus 32 days"
  ExpiresByType image/jpeg "access plus 32 days"

  ExpiresByType image/x-icon "access plus 32 days"
  ExpiresByType application/x-icon "access plus 32 days"

  FileETag none
</IfModule>

<IfModule mod_rewrite.c>
  RewriteEngine on

  # https should only really be used for 'system' stuff and maybe the home page
  RewriteCond %{HTTPS} "on"
  RewriteCond %{REQUEST_URI} !^/wordpress/
  RewriteCond %{REQUEST_URI} !^/wordpress-content/
  RewriteCond %{REQUEST_URI} !^/$
  RewriteRule (.*) http://willnorris.com/$1 [L,R]


  RewriteRule ^photos/?(.*) http://www.flickr.com/photos/wnorris/$1 [L,R]
  RewriteRule ^contact/?$ /about/ [L,R]
  RewriteRule ^tags/?(.*) /tag/$1 [L,R]
  RewriteRule ^svn/([a-z]+)/(.*) http://github.com/willnorris/$1/tree/master/$2 [L,R]

  # Old Pages
  RewriteRule ^projects/wp-microid        http://wordpress.org/extend/plugins/microid/ [L,R]
  RewriteRule ^projects/wpopenid          http://wordpress.org/extend/plugins/openid/ [L,R]
  RewriteRule ^projects/wp-(openid|xrds|yadis)  http://wordpress.org/extend/plugins/openid/ [L,R]
  RewriteRule ^projects(/.+|$) /about [L,R]

  RewriteRule ^about/thawte /about [L,R]

  RewriteRule ^author/will(/.*)?$          /author/willnorris$1 [L,R]
  RewriteRule xrds.xml$              /?xrds [L]

  RewriteRule ^wordpress/wp-content/(.*)$      wordpress-content/$1 [R=301,L]

  #RewriteCond %{SERVER_NAME} !^willnorris.com$ [NC]
  #RewriteRule (.*) http://willnorris.com/$1 [L,R=permanent]

  # Short URLs
  RewriteRule ^p/([a-z0-9]+)$  /?p=$1 [L,R=permanent]
</IfModule>


# BEGIN WPSuperCache
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
AddDefaultCharset UTF-8

RewriteCond %{HTTPS} "off"
RewriteCond %{REQUEST_METHOD} !POST
RewriteCond %{QUERY_STRING} !.+
#RewriteCond %{QUERY_STRING} !.*=.*
RewriteCond %{HTTP:Cookie} !^.*(comment_author_|wordpress_logged_in|wp-postpass_).*$
RewriteCond %{HTTP:Accept-Encoding} gzip
RewriteCond %{DOCUMENT_ROOT}/wordpress-content/cache/supercache/%{HTTP_HOST}/$1/index.html.gz -f
RewriteRule ^(.*) /wordpress-content/cache/supercache/%{HTTP_HOST}/$1/index.html.gz [L]

RewriteCond %{HTTPS} "off"
RewriteCond %{REQUEST_METHOD} !POST
RewriteCond %{QUERY_STRING} !.+
#RewriteCond %{QUERY_STRING} !.*=.*
RewriteCond %{HTTP:Cookie} !^.*(comment_author_|wordpress_logged_in|wp-postpass_).*$
RewriteCond %{DOCUMENT_ROOT}/wordpress-content/cache/supercache/%{HTTP_HOST}/$1/index.html -f
RewriteRule ^(.*) /wordpress-content/cache/supercache/%{HTTP_HOST}/$1/index.html [L]
</IfModule>
# END WPSuperCache


# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress
